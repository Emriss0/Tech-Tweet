{% extends "index.html" %}

{% load static %}

{% block title %}Update Profile{% endblock  %}

{% block main %}
<link rel="stylesheet" href="{% static 'twitter/css/updateProfileStyles.css' %}">

<div class="update-container">
    <div class="update-header">
        <h1 style="background: linear-gradient(45deg, #00f3ff, #0066ff);
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent;">
            {% if form.first_name %}
                Create Profile
            {% else %}
                Update Profile
            {% endif %}
            
        </h1>
    </div>

    <form method="POST" enctype="multipart/form-data" class="update-form">
        {% csrf_token %}
        <input type="hidden" id="clear_profile_picture" name="clear_profile_picture" value="false">

        <div class="d-flex justify-content-center align-item-center">
            <!-- Profile Picture Preview -->
            <img src="{{ user.profile.avatar.url }}" class="avatar-preview" id="avatarPreview">
        
        </div>
        <div class="d-flex justify-content-center align-item-center">
            <div class="form-group" >

                <div style="display: none;">
                    {{ form.avatar }}
                </div>
                
                <div class="">
                    <input type="file" id="id_avatar" name="profile_picture" accept="image/*" hidden>
            
                    <label for="id_avatar" class="social-icon" style="cursor: pointer;">
                        <i class="fa-solid fa-pen"></i>
                    </label>
                
                    {% if user.profile.avatar %}
                        <button type="button" class="clear-btn social-icon" onclick="clearProfilePicture()">
                            <i class="fas fa-trash"></i>
                        </button>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <label class="floating-label">First Name</label>
            {{ form.first_name }}
        </div>
        
        <div class="form-group">
            <label class="floating-label">Last Name</label>
            {{ form.last_name }}
        </div>
        
        <div class="form-group">
            <label class="floating-label">Mobile</label>
            {{ form.mobile }}
            <div class="tags-hint">Enter Mobile Number with Country Code</div>
        </div>
        
        <div class="form-group">
            <label class="floating-label">City</label>
            {{ form.city }}
        </div>
        
        <div class="form-group">
            <label class="floating-label">State</label>
            {{ form.state }}
        </div>
        
        <div class="form-group">
            <label class="floating-label">Country</label>
            {{ form.country }}
        </div>

        <div class="form-group">
            <label class="floating-label">About</label>
            {{ form.about }}
        </div>

        <div class="submit-section">
            <button type="submit" class="submit-btn">
                <i class="fas fa-wrench"></i> Update Profile
            </button>
        </div>
    </form>
</div>

<script src="{% static 'twitter/js/profileScripts.js' %}"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
{% endblock %}